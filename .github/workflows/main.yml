name: planetarium/libplanet/main
on:
  push:
    branches:
    - main
env:
  CODECOV_TOKEN: ${{ secrets.CODECOV_API_ACCESS_TOKEN }}
jobs:
  linux-netcore-build:
    defaults:
      run:
        working-directory: "/mnt/ramdisk"
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/dotnet/sdk:6.0
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/netcore_build_base"
  linux-netcore-test-netmq:
    defaults:
      run:
        working-directory: "/mnt/ramdisk"
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/dotnet/sdk:6.0
    needs:
    - linux-netcore-build
    env:
      TRANSPORT_TYPE: netmq
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/linux_netcore_test_base"
      with:
        code_coverage: false
  linux-netcore-test-ar-SA:
    defaults:
      run:
        working-directory: "/mnt/ramdisk"
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/dotnet/sdk:6.0
    needs:
    - linux-netcore-build
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/linux_netcore_test_base"
      with:
        locale: ar_SA.UTF-8
        code_coverage: false
  linux-netcore-test-fr-FR:
    defaults:
      run:
        working-directory: "/mnt/ramdisk"
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/dotnet/sdk:6.0
    needs:
    - linux-netcore-build
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/linux_netcore_test_base"
      with:
        locale: fr_FR.UTF-8
        code_coverage: false
  macos-netcore-test:
    runs-on: macos-latest
    needs:
    - linux-netcore-build
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: maxim-lobanov/setup-xcode@v1.6.0
      with:
        xcode-version: 14.3.1
    - uses: "./.github/actions/macos_netcore_test_base"
      with:
        code_coverage: false
  windows-netcore-test:
    runs-on: ubuntu-latest
    needs:
    - linux-netcore-build
    steps:
    - uses: actions/checkout@v4.1.0
    - uses: "./.github/actions/netcore_test_base"
